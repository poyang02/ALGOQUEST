/* --- Global Reset and Main App Layout --- */
* { box-sizing: border-box; }

html, body, #root {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Base Background: Blue/Purple Gradient */
    background: linear-gradient(135deg, #1e3a8a 0%, #5b21b6 100%);
}

.App {
    text-align: center;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    background-color: transparent;
}

/* --- Core Screen and Header Styles (Combined) --- */
.splash-screen, .App-header {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* Default for splash, overriden for header */
    color: white;
}

/* Splash Screen Specifics */
.splash-screen {
    position: fixed; top: 0; left: 0;
    background: linear-gradient(135deg, #1e3a8a 0%, #5b21b6 100%);
    z-index: 1000; color: #79f8f8;
    transition: opacity 0.5s ease-out;
}
.splash-screen.fade-out { opacity: 0; }
.splash-screen img { width: 40vmin; animation: none; border-radius: 10px; }

/* App Header Specifics */
.App-header {
    background-color: rgba(0, 0, 0, 0.6); /* Default Dark overlay for GAME SCREENS */
    justify-content: flex-start; /* Default align to top */
    font-size: calc(8px + 1vmin);
    padding: 20px;
    overflow-y: auto;
    position: relative; /* Anchor for absolute children */
}
.App-header.no-overlay, .App-header.no-overlay-auth {
    background-color: transparent !important;
}
.App-header.no-overlay-auth {
    justify-content: center !important;
}
.App-header h1 {
    font-size: 2.5vmin;
    color: #79f8f8;
    text-shadow: 0 0 5px rgba(121, 248, 248, 0.5);
}

/* --- Button Consolidation (Primary and Mission) --- */
.primary-button, .mission-card button, .auth-form button {
    width: 100%;
    padding: 10px;
    font-size: 1.9vmin;
    background-color: #1e90ff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    color: white;
    transition: background-color 0.2s;
}
.primary-button { margin-top: 20px; }
.mission-card button { width: 100%; margin-top: 10px; font-size: 1.6vmin; }
.auth-form button { width: 90%; font-size: 1.9vmin; }

.primary-button:hover, .mission-card button:hover, .auth-form button:hover {
    background-color: #1c7ad0;
}

/* --- Auth Page Styles (Login/Register) --- */
.auth-logo {
    max-width: 350px; width: 40vmin; height: auto;
    margin-top: 50px; margin-bottom: -50px;
    filter: drop-shadow(0 0 10px rgba(121, 248, 248, 0.8));
}
.auth-container { display: flex; justify-content: space-around; width: 80%; max-width: 900px; }
.auth-form {
    border: 1px solid #79f8f8; border-radius: 8px; padding: 20px; width: 45%;
    background-color: rgba(40, 44, 52, 0.9); box-shadow: 0 0 10px rgba(121, 248, 248, 0.4);
}
.auth-form div { margin-bottom: 15px; text-align: center; }
.auth-form label { display: block; margin-bottom: 5px; font-size: 1.8vmin; color: #79f8f8; }
.auth-form input {
    width: 90%; padding: 8px; font-size: 1.8vmin; border: none; border-radius: 4px;
    background-color: #3a3f47; color: white; margin: 0 auto; display: block;
}
.auth-form p { font-size: 1.6vmin; margin-top: 10px; }
.auth-form p a { color: #79f8f8; font-weight: bold; text-decoration: none; }
.auth-form p a:hover { text-decoration: underline; }

/* --- Game Hub/Container --- */
.game-container {
    width: 100%; max-width: 1200px; margin: 10px auto; padding: 15px;
    background-color: rgba(40, 44, 52, 0.9); border-radius: 8px; flex-grow: 1;
    display: flex; flex-direction: column; box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
}
.progress-bar-container {
    width: 100%; max-width: 800px; height: 25px; background-color: #3a3f47;
    border-radius: 15px; overflow: hidden; margin: 10px auto; border: 1px solid #79f8f8;
    box-shadow: 0 0 8px rgba(121, 248, 248, 0.5);
}
.progress-fill {
    height: 100%; background: linear-gradient(90deg, #1e90ff 0%, #79f8f8 100%);
    transition: width 0.5s ease-in-out; display: flex; align-items: center; justify-content: center;
    font-weight: bold; font-size: 1.6vmin; color: #1a1a2e; text-shadow: 0 0 1px white;
}

/* Mission Cards */
.hub-mission-list { display: flex; justify-content: space-around; flex-wrap: wrap; margin-top: 20px; }
.mission-card {
    border: 1px solid #79f8f8; border-radius: 8px; padding: 20px; margin: 10px;
    width: 300px; background-color: rgba(26, 26, 46, 0.9); box-shadow: 0 0 15px rgba(121, 248, 248, 0.2);
    transition: transform 0.2s;
}
.mission-card:hover { transform: translateY(-5px) scale(1.02); }
.mission-card h3 { color: #79f8f8; margin-top: 0; font-size: 2vmin; }
.mission-card p { font-size: 1.5vmin; line-height: 1.5; }
.status { font-weight: bold; font-size: 1.5vmin; }
.status-pending { color: #f39c12; }
.status-complete { color: #2ecc71; }

/* --- Content Screens (Welcome, HowToPlay) --- */
.content-screen { display: flex; align-items: center; justify-content: space-around; padding: 20px; }
.content-text { width: 60%; text-align: left; line-height: 1.6; font-size: 1.8vmin; }
.content-text h2 { color: #79f8f8; font-size: 2.2vmin; }
.content-text ul { list-style-type: 'ðŸŽ® '; padding-left: 30px; }
.content-image { width: 30%; }
.content-image img { max-width: 100%; height: auto; background-color: transparent; }

/* --- Mission Layouts --- */
.mission-layout {
    display: flex; justify-content: space-between;
    width: 100%; height: 100%; overflow-y: auto;
}
.dnd-item {
    border: 1px solid #79f8f8; padding: 10px; margin: 5px 0; background-color: #3a3f47;
    border-radius: 4px; cursor: grab; font-size: 1.6vmin; color: white;
}
.dnd-item-overlay {
    border: 1px solid #79f8f8; padding: 10px; margin: 5px 0; background-color: #4a5059;
    border-radius: 4px; cursor: grabbing; font-size: 1.6vmin; box-shadow: 0 0 15px rgba(121, 248, 248, 0.8);
}
.dnd-column, .dnd-column-split, .flowchart-pseudocode, .quiz-answers, .sorter-box, .pseudocode-box {
    border-radius: 8px; padding: 10px; background-color: rgba(0, 0, 0, 0.2);
}
.dnd-column, .dnd-column-split {
    border: 2px dashed #79f8f8; min-height: 300px;
}
.dnd-column { width: 23%; }
.dnd-column-split { width: 48%; }
.dnd-column h4, .dnd-column-split h4 { margin-top: 0; color: #79f8f8; }
.dnd-column.available, .dnd-column-split.available { border: 1px solid #555; background-color: #282c34; }

/* Drag & Drop Containers */
.dnd-container { display: flex; justify-content: space-around; width: 100%; }
.dnd-container-split { display: flex; justify-content: space-around; margin-bottom: 20px; width: 100%; }

/* Table and Quiz Styles */
.styled-table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 1.6vmin; border: 1px solid #555; }
.styled-table th, .styled-table td { border: 1px solid #555; padding: 10px; text-align: left; }
.styled-table thead th { background-color: #4a5059; color: #79f8f8; }
.styled-table tbody tr:nth-child(even) { background-color: #3a3f47; }

.table-input, .quiz-input {
    background-color: #3a3f47; color: white; border: 2px solid #79f8f8;
    border-radius: 4px; padding: 5px; font-size: 1.6vmin; text-align: center;
}
.table-input { width: 50px; }
.quiz-input { font-family: monospace; width: 200px; }

.choice-button {
    display: block; width: 100%; padding: 12px; margin: 8px 0; font-size: 1.6vmin;
    text-align: left; background-color: #4a5059; border: 1px solid #555; color: white;
    border-radius: 4px; cursor: pointer; transition: background-color 0.2s, box-shadow 0.2s;
}
.choice-button:hover { background-color: #5a6069; }
.choice-button.selected {
    background-color: #1e90ff; border-color: #fff; color: white; font-weight: bold;
    box-shadow: 0 0 8px rgba(121, 248, 248, 0.8);
}

/* --- Algorithm Building (Pembinaan) Styles --- */
.sorter-container { display: flex; justify-content: space-around; width: 100%; }
.sorter-box { border: 1px solid #555; width: 48%; }
.sorter-item {
    display: flex; justify-content: space-between; align-items: center; margin: 5px 0;
    padding: 8px; background-color: #3a3f47; border: 1px solid #555; border-radius: 4px;
    font-size: 1.6vmin;
}
.sorter-item button {
    background-color: #1e90ff; border: none; color: white; font-weight: bold; cursor: pointer;
    border-radius: 4px; padding: 2px 6px; margin-left: 5px; width: auto;
}
.sorter-item button:disabled { background-color: #555; color: #999; cursor: not-allowed; }

/* Flowchart Matcher (M2) */
.flowchart-container { display: flex; justify-content: space-around; width: 100%; }
.flowchart-pseudocode { border: 1px solid #555; width: 40%; min-height: 400px; background-color: #282c34; }
.flowchart-boxes { width: 55%; }
.flowchart-box {
    border: none; padding: 0; width: 100%; min-height: 0;
    background-color: transparent; border-radius: 0; margin-bottom: 10px;
}
.flowchart-box h4 { margin: 0 0 5px 0; color: #79f8f8; font-size: 1.5vmin; }

/* Fill-in-the-blanks (M3) */
.quiz-container { display: flex; justify-content: space-around; }
.quiz-pseudocode {
    border: 1px solid #79f8f8; padding: 20px; font-family: monospace; text-align: left;
    width: 55%; background-color: #282c34; font-size: 1.8vmin; line-height: 2;
}
.quiz-answers { border: 1px solid #79f8f8; width: 40%; background-color: #282c34; }
.quiz-answers code { display: block; background-color: #3a3f47; padding: 8px; margin: 5px 0; border-radius: 4px; cursor: pointer; }

/* --- Debugging (Penyahpepijat) Styles --- */
.debug-container { display: flex; justify-content: space-around; width: 100%; }
.pseudocode-box {
    border: 1px solid #79f8f8; padding: 15px; font-family: monospace; text-align: left;
    width: 48%; background-color: #282c34; font-size: 1.6vmin; line-height: 1.8;
}
.pseudocode-box .error { color: #ff6b6b; font-weight: bold; }
.debug-answer-box { border: 2px dashed #79f8f8; padding: 15px; width: 48%; background-color: rgba(0, 0, 0, 0.2); }
.order-input {
    width: 40px; margin-right: 10px; text-align: center; font-size: 1.6vmin;
    padding: 5px; border-radius: 4px; border: 1px solid #79f8f8; background-color: #3a3f47; color: white;
}
.output-table { width: 100%; font-size: 1.5vmin; margin-top: 10px; border: 1px solid #79f8f8; border-collapse: collapse; }
.output-table th { color: #79f8f8; background-color: #3a3f47; }
.output-table td { border: 1px solid #555; padding: 8px; }
.output-table .fail { background-color: #5a2e2e; }
.output-table .pass { background-color: #2e5a3e; }

.debug-answer-box {
  border: 2px dashed #79f8f8;
  padding: 15px;
  width: 48%;
  background-color: rgba(0, 0, 0, 0.2);
  text-align: left; /* everything left by default */
}

/* only the heading centered */
.debug-answer-box .debug-title {
  text-align: center;
  font-weight: bold;
}


/* Make both titles look the same */
.pseudocode-box h4,
.debug-answer-box h4 {
  text-align: center;
  font-weight: bold;
  font-size: 2.5vmin;   /* tweak this if one looked larger/smaller before */
  margin: 0 0 10px 0;
}



/* --- Mission Complete Screen --- */
.complete-screen {
    display: flex; flex-direction: column; align-items: center;
    justify-content: center; text-align: center; padding: 40px;
}
.complete-screen h2 { font-size: 3vmin; color: #2ecc71; margin-bottom: 10px; }
.complete-screen h3 { font-size: 4vmin; color: #79f8f8; margin: 10px 0; }
.complete-screen p { font-size: 1.8vmin; line-height: 1.6; }

/* --- Welcome Page Highlights/Text --- */
.welcome-highlight {
    text-align: center; font-weight: bold; font-size: 1.2em; margin-bottom: 20px; color: #79f8f8;
}
.welcome-highlight p { margin: 5px 0; }
.welcome-highlight.super-bold-large {
    font-size: 2.5em; font-weight: 900; color: #79f8f8;
    text-shadow: 0 0 10px rgba(121, 248, 248, 0.7);
}
.welcome-highlight .normal-welcome-text {
    font-size: 0.7em; font-weight: normal; opacity: 0.8; color: white; text-shadow: none;
}
.white-text, .white-text h2, .white-text p { color: white; }

/* --- Global Alignment --- */
.center-full-width { width: 100%; text-align: center; margin-top: 20px; }

/* --- Background Images (Cleaned) --- */
.bg-intro-image, .bg-auth-image {
    background-repeat: no-repeat; background-position: center center; background-attachment: fixed;
    background-size: cover; background-blend-mode: overlay; background-color: rgba(0, 0, 0, 0.4);
}
.bg-auth-image { background-image: url('../public/background5.jpg'); }
.bg-intro-image { background-image: url('../public/background6.jpg'); }

/* --- Robot Sidebar and Bubble (Mission Screen) --- */
.robot-sidebar {
      flex: 0 0 25%;

    --robot-width: 130px;
    --robot-bottom-gap: 70px;
    --bubble-robot-gap: 80px;
    --bubble-max-width: 320px;
    width: 20%; display: block; position: relative; padding: 20px 10px; min-height: 260px;
}
.robot-sidebar img {
    position: absolute; bottom: var(--robot-bottom-gap); left: 50%;
    transform: translateX(-50%); width: var(--robot-width); height: auto;
    display: block; z-index: 10; order: 1; margin: 0;
}
.robot-chat-bubble {
    position: absolute; left: 50%; transform: translateX(-50%);
    bottom: calc(var(--robot-bottom-gap) + var(--robot-width) + var(--bubble-robot-gap));
    max-width: var(--bubble-max-width); width: 180px; background-color: #4a5059;
    border-radius: 10px; padding: 12px 14px; font-size: 1.6vmin; line-height: 1.5;
    text-align: left; border: 2px solid #79f8f8; z-index: 20; box-sizing: border-box;
    transition: all 160ms ease; box-shadow: 0 6px 18px rgba(0,0,0,0.25);
}
.robot-chat-bubble::after {
    content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%);
    width: 0; height: 0; border: 8px solid transparent; border-top: 8px solid #79f8f8; z-index: 19;
}

/* --- Robot Auth Screen Bubble --- */
.auth-robot-image {
    position: absolute; bottom: 0; right: 0; width: 20vmin; max-width: 200px;
    transform: scaleX(-1);
}
.robot-speech-container {
    position: absolute; bottom: 25vmin; right: 5%; width: 250px; z-index: 50;
}
.robot-speech-bubble {
    background-color: #4a5059; border: 2px solid #79f8f8; border-radius: 10px;
    padding: 15px; text-align: left; font-size: 1.6vmin; color: white;
    box-shadow: 0 0 10px rgba(121, 248, 248, 0.4);
}
.robot-speech-bubble::after {
    content: ''; position: absolute; bottom: -10px; right: 15px; width: 0; height: 0;
    border: 10px solid transparent; border-top: 10px solid #79f8f8;
}
.auth-speech-bubble span { border-right: none !important; }

/* --- Animations --- */
.typewriter {
    overflow: hidden; white-space: nowrap;
    animation: typing 2.5s steps(30, end), blink 0.5s step-end infinite;
    animation-fill-mode: forwards; border-right: 2px solid rgba(121, 248, 248, 0.7);
}
.message-reveal { opacity: 0; animation: fadeIn 0.2s ease-in forwards; animation-delay: 0.1s; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* --- How To Play Layout --- */
.how-to-play-layout {
    display: flex; flex-direction: column; justify-content: flex-start;
    height: 100%; width: 100%; align-items: center; padding: 20px 0 0 0;
}
.how-to-play-layout .card-row-wrapper {
    display: flex; justify-content: space-between; width: 100%; max-width: 1000px;
    margin-bottom: 20px; gap: 20px; flex-grow: 1;
}
.how-to-play-layout .primary-button-wrapper { margin-top: auto; padding-top: 20px; }
.how-to-play-layout ul { list-style-type: none; padding-left: 0; margin: 5px 0; }
.how-to-play-layout ul li {
    padding: 5px 0; border-bottom: 1px dashed rgba(121, 248, 248, 0.2); color: white;
}
.how-to-play-layout ul li::before {
    content: 'â–¶ '; color: #1e90ff; font-weight: bold; margin-right: 8px; font-size: 1.2em;
}

/* --- Settings Menu --- */
.settings-icon, .settings-menu button { transition: transform 0.2s, background-color 0.2s; }
.settings-icon {
    position: absolute; top: 20px; left: 20px; width: 42px; height: 42px;
    background-color: rgba(40, 44, 52, 0.9); border-radius: 50%; cursor: pointer; z-index: 900;
    border: 2px solid #79f8f8; display: flex; align-items: center; justify-content: center;
    filter: drop-shadow(0 0 6px #00eaff); animation: settingsGlow 1.8s infinite ease-in-out;
}
.settings-wrapper { position: relative; display: flex; flex-direction: column; align-items: center; margin-bottom: 45px; }
.settings-icon:hover { transform: rotate(25deg) scale(1.1); }
.settings-icon img { width: 60%; }

@keyframes settingsGlow {
    0% { filter: drop-shadow(0 0 4px #00f0ff); }
    50% { filter: drop-shadow(0 0 12px #79f8f8); }
    100% { filter: drop-shadow(0 0 4px #00f0ff); }
}

.settings-tooltip {
    visibility: hidden; opacity: 0; position: absolute; top: 50%; left: 60px;
    transform: translateY(-50%); background: rgba(0,0,0,0.8); padding: 5px 10px;
    border-radius: 6px; color: #79f8f8; font-size: 14px; transition: opacity 0.3s ease;
    white-space: nowrap; pointer-events: none;
}
.settings-wrapper:hover .settings-tooltip { visibility: visible; opacity: 1; }

.settings-backdrop {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.8); z-index: 999;
    display: flex; align-items: center; justify-content: center;
}
.settings-menu {
    background-color: #282c34; border: 3px solid #79f8f8; border-radius: 10px;
    padding: 30px; width: 350px; box-shadow: 0 0 30px rgba(121, 248, 248, 0.9);
    text-align: center;
}
.settings-menu button { width: 100%; margin: 10px 0; padding: 12px; font-size: 1.8vmin; font-weight: bold; }

/* --- Flowchart (Carta Alir) Shapes --- */
.flowchart-shape {
    min-width: 140px; min-height: 70px; display: flex; justify-content: center;
    align-items: center; text-align: center; padding: 8px; box-sizing: border-box;
    border: 2px solid #00ffff; background-color: transparent; border-style: solid;
    outline: none; background: #3498db; color: #fff; font-weight: bold;
}

/* Flowchart - remove drag-and-drop item look */
.flowchart-shape .dnd-item, .flowchart-shape .dnd-item-overlay {
    background: none; border: none; box-shadow: none; padding: 0; margin: 0;
    width: 90%; height: auto; text-align: center;
}

/* Shape-specific styles */
.flowchart-shape-oval { border-radius: 999px; }
.flowchart-shape-rectangle { border-radius: 8px; }
.flowchart-shape-parallelogram { transform: skewX(-20deg); }
.flowchart-shape-parallelogram .dnd-item { transform: skewX(20deg); }

.flowchart-shape-diamond {
    width: 100px; height: 100px; transform: rotate(10deg); display: flex;
    align-items: center; justify-content: center; margin: 0 auto;
}
.flowchart-shape-diamond .dnd-item { transform: rotate(0deg) scaleY(1.18); }

/* Arrows & Labels */
.flowchart-arrow-row {
    display: flex; justify-content: center; align-items: center;
    gap: 6px; font-weight: bold; color: #fff;
}
.flowchart-arrow-row span.arrow {
    display: inline-block; width: 0; height: 0;
    border-left: 6px solid transparent; border-right: 6px solid transparent;
    border-top: 10px solid #fff;
}
.flowchart-arrow-row span.label-yes { font-weight: bold; margin-right: 4px; }

.mission-content {
  flex: 1; /* remaining space = 75% */
  padding: 20px;
  box-sizing: border-box;
  overflow-x: auto; /* in case wide content */
}

.confetti-container {
  position: absolute;
  top: 0;
  left: 50%;
  width: 0;
  height: 0;
  pointer-events: none;
}
